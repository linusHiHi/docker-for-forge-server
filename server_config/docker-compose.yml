version: '3.8'

services:
  minecraft-forge:
    # 使用预构建的镜像
    image: "crpi-vv1v4s4fdwh8q4xq.cn-hangzhou.personal.cr.aliyuncs.com/autsch/forge-mc-server:Planetary-1.0.0-alpha"
    
    container_name: planetary-server
    
    environment:
      - EULA=TRUE
    
    ports:
      - "25564:25565"  # Minecraft 服务器端口
    
    volumes:
      # 挂载世界存档和配置文件到主机，实现数据持久化
      - ./data/world:/app/world
      - ./data/modified_data:/app/modified_data
    
    restart: unless-stopped
    
    # 设置内存限制
    deploy:
      resources:
        limits:
          memory: 10G
        reservations:
          memory: 2G
